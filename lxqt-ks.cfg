graphical
lang en_US.UTF-8
keyboard --vckeymap=us --xlayouts=us
network --bootproto=dhcp --ipv6=auto --onboot=on --activate
timezone --utc America/Denver

ignoredisk --only-use=sda
zerombr
clearpart --all --initlabel --disklabel=gpt
autopart --type=lvm
bootloader --location=mbr --boot-drive=sda --append="rhgb quiet"

url --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&arch=$arch

auth --enableshadow --passalgo=sha512
rootpw --plaintext --lock a
user --name=dgraham --gecos=dgraham --groups=wheel --password=a --plaintext --shell=/usr/bin/fish --uid=1337 --gid=1337

firstboot --disable
firewall --enabled --ssh
selinux --enforcing
xconfig --startxonboot
services --enabled=ntpd,sshd
reboot

%packages

@^lxqt-desktop-environment
@development-tools
@fonts
@libreoffice
@lxqt-apps
@lxqt-media
@lxqt-office
@rpm-development-tools
@text-internet
@virtualization
abiword
acpi
aisleriot
android-tools
aspell-en
aspell-fr
audacious
bc
bibletime
bind-utils
bitstream-vera-fonts-common
bitstream-vera-sans-mono-fonts
bitstream-vera-serif-fonts
blender
bluefish
cabextract
calibre
calligra-krita
copr-cli
curl
deltarpm
dialog
diffutils
dnf-plugins-core
dosbox
exfalso
easytag
ed
enchant
eog
ethtool
evince
fbreader
fish
flac
florence
fortune-mod
fping
freerdp
frozen-bubble
galculator
gcc-c++
genisoimage
gnash
gnumeric
gnuplot
ghex
gimp
gimp-data-extras
gimp-help
gimp-help-browser
gimp-resynthesizer
GitPython
gnome-mahjongg
gnome-mines
gnome-robots
gnome-sudoku
gnome-tetravex
gnuplot
gocr
golang
gparted
gpick
graphviz
grip
gtkterm
hdparm
hexchat
hfsplus-tools
htop
hunspell-en
hunspell-fr
hydrogen
iagno
ImageMagick
inkscape
iotop
k3b
knetwalk
KoboDeluxe
konqueror
kshisen
ktorrent
lcdtest
libvirt-daemon-qemu
linux-libertine-fonts
linux-libertine-biolinum-fonts
links
livecd-tools
livestreamer
lynx
memtest86+
minicom
mlocate
mousepad
ncdu
net-snmp-utils
nfs-utils
nmap
ntfs-3g
ntfsprogs
ntp
optipng
p7zip
p7zip-plugins
pandoc
pcmanfm-qt
pyp2rpm
python-beautifulsoup4
python-dnf-plugins-extras-tracer
python-praw
python-PyGithub
python-sh
pytz
python-urllib3
PyYAML
quadrapassel
rdesktop
renameutils
rsync
ruby-devel
ruby-irb
ruby-RMagick
rubygem-json
rubygem-psych
rubygem-rake
rubygem-sass
rxvt-unicode
screenfetch
scribus
smartmontools
sox
strace
swell-foop
synfigstudio
syslinux
tcpdump
tcptraceroute
tesseract
tftp
tig
timidity++
ttmkfdir
udftools
vim-enhanced
vim-X11
vinagre
vorbis-tools
w3m
w3m-img
wget
wine
wireshark
wireshark-gnome
xar
xcalc
xfce4-notifyd
xfce4-terminal
xpdf
xsane-gimp
xscreensaver-gl-extras
xscreensaver-extras
zynaddsubfx

%end

%post

dnf -y install http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm
dnf -y install http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
dnf -y clean all
dnf -y makecache
dnf -y upgrade
dnf -y install a52dec audacious-plugins-freeworld audacity-freeworld faad2 ffmpeg gstreamer-plugins-ugly gstreamer1-plugins-ugly k3b-extras-freeworld kdenlive lame mplayer mpv rtmpdump swftools unrar vlc xbill
dnf -y install http://iweb.dl.sourceforge.net/project/mscorefonts2/rpms/msttcore-fonts-installer-2.6-1.noarch.rpm

systemctl enable sshd
systemctl enable ntpd
systemctl enable libvirtd
systemctl enable fstrim.timer

mkdir -p /etc/udev/hwdb.d
printf "evdev:input:*\n" > /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf " KEYBOARD_KEY_3a=leftctrl\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf " KEYBOARD_KEY_1d=capslock\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf "\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf "evdev:atkbd:dmi:*\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf " KEYBOARD_KEY_3a=leftctrl\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
printf " KEYBOARD_KEY_1d=capslock\n" >> /etc/udev/hwdb.d/70-keyboard-custom.hwdb
udevadm hwdb --update

%end
