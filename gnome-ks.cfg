graphical
lang en_US.UTF-8
keyboard --vckeymap=us --xlayouts=us
network --bootproto=dhcp --ipv6=auto --onboot=on --activate
timezone --utc America/Denver

ignoredisk --only-use=sda
zerombr
clearpart --all --initlabel --disklabel=gpt
autopart --type=lvm
bootloader --location=mbr --boot-drive=sda --append="rhgb quiet"

url --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&arch=$arch

auth --enableshadow --passalgo=sha512
rootpw --lock
user --name=dgraham --gecos=dgraham --groups=wheel --password=a --plaintext --shell=/usr/bin/fish --uid=1337 --gid=1337

firstboot --disable
firewall --enabled --ssh
selinux --enforcing
xconfig --defaultdesktop=GNOME --startxonboot
reboot

%packages

@^workstation-product-environment
@development-tools
@fonts
@libreoffice
@rpm-development-tools
acpi
aisleriot
android-tools
aspell-en
aspell-fr
audacity
bibletime
bind-utils
blender
bluefish
calligra-krita
cmake
copr-cli
curl
dconf-editor
deltarpm
diffutils
dnf-plugins-core
ed
enchant
eog
epiphany
evince
fbreader
flac
-firefox
fish
florence
galculator
gcc-c++
ghex
gimp
gimp-data-extras
gimp-help
gimp-resynthesizer
GitPython
gnome-mahjongg
gnome-mines
gnome-robots
gnome-sudoku
gnome-tetravex
gnuplot
golang
gpick
graphviz
gstreamer1-vaapi
hdparm
hexchat
hfsplus-tools
htop
hunspell-en
hunspell-fr
hwloc
hwloc-gui
hydrogen
iagno
ImageMagick
inkscape
iotop
keepassxc
knetwalk
kshisen
ktorrent
lcdtest
linux-libertine-fonts
linux-libertine-biolinum-fonts
memtest86+
mlocate
most
mousepad
ncdu
neovim
nethogs
nfs-utils
nmap
ntfs-3g
ntfsprogs
optipng
p7zip
p7zip-plugins
pandoc
pavucontrol
pngquant
puppet
pyp2rpm
python-beautifulsoup4
python-PyGithub
python2-ruamel-yaml
python2-sh
python2-urllib3
python3-beautifulsoup4
python3-dnf-plugin-tracer
python3-PyGithub
python3-pytz
python3-ruamel-yaml
python3-sh
python3-streamlink
python3-urllib3
pytz
ranger
renameutils
retext
rpmlint
rsync
ruby-devel
ruby-irb
ruby-RMagick
rubygem-gem2rpm
rubygem-json
rubygem-psych
rubygem-puppet-lint
rubygem-rake
rubygem-rugged
rubygem-sass
screenfetch
scribus
smartmontools
sox
sqlite
strace
swell-foop
synfigstudio
tcpdump
tcptraceroute
tftp
tilix
tmux
ttmkfdir
udftools
unar
w3m
w3m-img
wget
wireshark
wireshark-gnome
wordgrinder
xar
xpdf
xsane-gimp

%end

%post

dnf -y copr enable drgraham/apngasm
dnf -y copr enable drgraham/apngutils
dnf -y copr enable drgraham/praw
dnf -y copr enable drgraham/r10k

printf "[google-chrome]\n" > /etc/yum.repos.d/google-chrome.repo
printf "name=google-chrome\n" >> /etc/yum.repos.d/google-chrome.repo
printf "baseurl=https://dl.google.com/linux/chrome/rpm/stable/x86_64\n" >> /etc/yum.repos.d/google-chrome.repo
printf "enabled=1\n" >> /etc/yum.repos.d/google-chrome.repo
printf "gpgcheck=1\n" >> /etc/yum.repos.d/google-chrome.repo
printf "gpgkey=https://dl.google.com/linux/linux_signing_key.pub\n" >> /etc/yum.repos.d/google-chrome.repo

dnf -y install http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm
dnf -y install http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
dnf -y clean all
dnf -y makecache
dnf -y upgrade
dnf -y install apng2gif apngasm apngdis apngopt ffmpeg gif2apng google-chrome-stable gstreamer1-libav kdenlive mpv python2-praw python3-praw r10k

systemctl enable sshd
systemctl enable systemd-timesyncd
systemctl enable fstrim.timer

wget -P /usr/local/bin https://raw.githubusercontent.com/drgraham/dotfiles/master/site/profile/files/dotfiles
chmod 755 /usr/local/bin/dotfiles

%end
