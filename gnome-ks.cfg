graphical
lang en_US.UTF-8
keyboard --vckeymap=us --xlayouts=us
network --bootproto=dhcp --ipv6=auto --onboot=on --activate
timezone --utc America/Denver

ignoredisk --only-use=sda
zerombr
clearpart --all --initlabel --disklabel=gpt
autopart --type=lvm
bootloader --location=mbr --boot-drive=sda --append="rhgb quiet"

url --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&arch=$arch

auth --enableshadow --passalgo=sha512
rootpw --plaintext --lock a
user --name=dgraham --gecos=dgraham --groups=wheel --password=a --plaintext --shell=/usr/bin/fish --uid=1337 --gid=1337

firstboot --disable
firewall --enabled --ssh
selinux --enforcing
xconfig --defaultdesktop=GNOME --startxonboot
reboot

%packages

@^workstation-product-environment
@development-tools
@fonts
@libreoffice
@rpm-development-tools
acpi
aisleriot
android-tools
aspell-en
aspell-fr
audacity
bibletime
bind-utils
blender
bluefish
calligra-krita
cmake
copr-cli
curl
dconf-editor
deltarpm
diffutils
dnf-plugins-core
python3-dnf-plugins-extras-tracer
ed
enchant
eog
evince
fbreader
flac
-firefox
fish
florence
frozen-bubble
galculator
gcc-c++
ghex
gimp
gimp-data-extras
gimp-help
gimp-help-browser
gimp-resynthesizer
GitPython
gnome-mahjongg
gnome-mines
gnome-robots
gnome-sudoku
gnome-tetravex
gnuplot
golang
gpick
graphviz
gstreamer1-vaapi
hdparm
hexchat
hfsplus-tools
htop
hunspell-en
hunspell-fr
hwloc
hwloc-gui
hydrogen
iagno
ImageMagick
inkscape
iotop
keepassx
knetwalk
konqueror
kshisen
ktorrent
lcdtest
linux-libertine-fonts
linux-libertine-biolinum-fonts
livestreamer
memtest86+
mlocate
most
mousepad
ncdu
neovim
nfs-utils
nmap
ntfs-3g
ntfsprogs
optipng
p7zip
p7zip-plugins
pandoc
pavucontrol
pngquant
pyp2rpm
python-beautifulsoup4
python-dnf-plugins-extras-tracer
python-PyGithub
python-sh
python-trollius
python-urllib3
python3-PyYAML
python3-trollius
pytz
PyYAML
renameutils
retext
rpmlint
rsync
ruby-devel
ruby-irb
ruby-RMagick
rubygem-json
rubygem-psych
rubygem-rake
rubygem-sass
screenfetch
scribus
smartmontools
sox
sqlite
strace
swell-foop
synfigstudio
tcpdump
tcptraceroute
terminology
tftp
tmux
ttmkfdir
udftools
unar
w3m
w3m-img
wget
wireshark
wireshark-gnome
xar
xpdf
xsane-gimp

%end

%post

dnf -y copr enable drgraham/apngasm
dnf -y copr enable drgraham/apngutils
dnf -y copr enable drgraham/praw
dnf -y copr enable drgraham/xbomb

printf "[google-chrome]\n" > /etc/yum.repos.d/google-chrome.repo
printf "name=google-chrome\n" >> /etc/yum.repos.d/google-chrome.repo
printf "baseurl=https://dl.google.com/linux/chrome/rpm/stable/x86_64\n" >> /etc/yum.repos.d/google-chrome.repo
printf "enabled=1\n" >> /etc/yum.repos.d/google-chrome.repo
printf "gpgcheck=1\n" >> /etc/yum.repos.d/google-chrome.repo
printf "gpgkey=https://dl.google.com/linux/linux_signing_key.pub\n" >> /etc/yum.repos.d/google-chrome.repo

dnf -y install http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm
dnf -y install http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
dnf -y clean all
dnf -y makecache
dnf -y upgrade
dnf -y install apng2gif apngasm apngdis apngopt ffmpeg gif2apng google-chrome-stable gstreamer1-plugins-ugly kdenlive mpv xbomb

systemctl enable sshd
systemctl enable systemd-timesyncd
systemctl enable fstrim.timer

%end
